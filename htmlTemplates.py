css = '''
<style>
.chat-message {
    padding: 1.5rem; border-radius: 0.5rem; margin-bottom: 1rem; display: flex
}
.chat-message.user {
    background-color: #2b313e
}
.chat-message.bot {
    background-color: #475063
}
.chat-message .avatar {
  width: 20%;
}
.chat-message .avatar img {
  max-width: 78px;
  max-height: 78px;
  border-radius: 50%;
  object-fit: cover;
}
.chat-message .message {
  width: 80%;
  padding: 0 1.5rem;
  color: #fff;
}
'''

bot_template = '''
<div class="chat-message bot">
    <div class="avatar">
        <img src="data:image/jpeg;base64,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" style="max-height: 78px; max-width: 78px; border-radius: 50%; object-fit: cover;">
    </div>
    <div class="message">{{MSG}}</div>
</div>
'''

user_template = '''
<div class="chat-message user">
    <div class="avatar">
        <img src="https://media.istockphoto.com/id/1191073965/video/young-woman-using-laptop-character.jpg?s=640x640&k=20&c=ao-TOappjjGUIeqrmssuQKv76kLa4tjCXr6tmO4Gfeg=">
    </div>    
    <div class="message">{{MSG}}</div>
</div>
'''